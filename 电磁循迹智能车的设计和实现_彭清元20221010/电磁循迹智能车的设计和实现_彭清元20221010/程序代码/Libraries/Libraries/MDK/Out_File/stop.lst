C251 COMPILER V5.60.0,  stop                                                               07/10/22  19:46:41  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE stop
OBJECT MODULE PLACED IN .\Out_File\stop.obj
COMPILER INVOKED BY: D:\Keil_v5\C251\BIN\C251.EXE stop.c XSMALL INTR2 WARNINGLEVEL(3) BROWSE INCDIR(..\..\Libraries\libr
                    -aries;..\..\Libraries\seekfree_libraries;..\..\Libraries\seekfree_peripheral;..\CODE;..\USER\inc;..\USER\src) DEBUG PRIN
                    -T(.\Out_File\stop.lst) TABS(2) OBJECT(.\Out_File\stop.obj) 

stmt  level    source

    1          #include "headfile.h"
    2          #include "stop.h"
    3          
    4          int stop_cnt = 0;
    5          int cheku_flag = 0;
    6          int cheku_flag1 = 0; 
    7          int stop_flag = 0;
    8          
    9          void my_stop();
   10          void cheku();
   11          void cheku_plus();
   12          
   13          void my_stop()
   14          {
   15   1          if(ad[0] < 2 && ad[1] < 2 && ad[2] < 2 && ad[3] < 2 && ad[4]< 2 && ad[5]< 2)
   16   1          { 
   17   2            stop_cnt = stop_cnt + 1;
   18   2          }
   19   1          
   20   1          if(ad[0] > 40 && ad[1] > 40)
   21   1          {
   22   2           stop_cnt = 0;
   23   2          }
   24   1          
   25   1          if(stop_cnt > 40 && !stop_flag)
   26   1          {
   27   2      //      run = 0;
   28   2              stop_flag = 1;
   29   2          }
   30   1          if(stop_flag)
   31   1          {
   32   2            all_speed_L = 0;
   33   2            all_speed_R = 0;
   34   2            ki_l = 20;
   35   2            ki_r = 20;
   36   2          }
   37   1      
   38   1      }
   39          
   40          int che_cut = 0;
   41          int che_a = 0;
   42          void cheku()
   43          {
   44   1        if(!P26 && !cheku_flag && recording == 2)  //改条件
   45   1        {
   46   2          cheku_flag = 1;
   47   2      //    run = 0;
   48   2          all_speed_L = 0;
   49   2          all_speed_R = 0;
   50   2          ki_l = 20;
   51   2          ki_r = 20;
   52   2          che_cut = 0;
   53   2        }
   54   1        if(cheku_flag == 1 && che_cut <30)
   55   1        {
   56   2          che_cut = che_cut + 1;
   57   2        }
C251 COMPILER V5.60.0,  stop                                                               07/10/22  19:46:41  PAGE 2   

   58   1        if(cheku_flag == 1 && che_cut >20)
   59   1        {
   60   2          che_cut = 0;
   61   2          cheku_flag = 2;
   62   2        }
   63   1        if(cheku_flag == 2) //倒车
   64   1        {
   65   2          all_speed_L = -30;
   66   2          all_speed_R = -30;
   67   2          duty_ = mid;
   68   2        }
   69   1        if(cheku_flag == 2 && che_cut < 1000)
   70   1        {
   71   2          che_cut = che_cut + 1;
   72   2        }
   73   1      
   74   1        if(in_normall_speed == 60) che_a = 40;
   75   1        if(in_normall_speed == 65) che_a = 55;
   76   1        if(in_normall_speed == 70) che_a = 65;
   77   1        if(cheku_flag == 2 && che_cut > che_a && !open) //可改
   78   1        {
   79   2          cheku_flag = 3;
   80   2          open = 1;
   81   2          sum_angle = 0;
   82   2        }
   83   1        if(cheku_flag == 3) duty_ = right;
   84   1        if(cheku_flag == 3 && (abs(sum_angle) > 90 ))
   85   1        {
   86   2          cheku_flag = 4;
   87   2          open = 0;
   88   2          sum_angle = 0;
   89   2        }
   90   1        if(cheku_flag == 4)     duty_ = mid;
   91   1        if(cheku_flag == 4 && ((ad[2] > 170 && ad[3] > 170  && ad[7] > 40 && ad[8] > 40)  ))
   92   1        {
   93   2          cheku_flag = 5;
   94   2      
   95   2        }
   96   1        if(cheku_flag == 5)
   97   1        {
   98   2          all_speed_L = 0;
   99   2          all_speed_R = 0;
  100   2          ki_l = 20;
  101   2          ki_r = 20;
  102   2        }
  103   1      }
  104          
  105          void cheku_plus()
  106          {
  107   1        if(recording == 1 && cheku_flag1 == 1 && !cheku_flag)
  108   1        {
  109   2          cheku_flag = 1; 
  110   2          che_cut = 0;
  111   2        }
  112   1        if(cheku_flag == 1 || cheku_flag == 2)
  113   1        {
  114   2          che_cut = che_cut + (nowspeed_L + nowspeed_R) / 2;
  115   2        }
  116   1        if(cheku_flag == 1) 
  117   1        {
  118   2          all_speed_L = 80;
  119   2          all_speed_R = 80;
  120   2        }
  121   1        if(cheku_flag == 1 && che_cut > 14100)    //前走一段
  122   1        {
  123   2      
C251 COMPILER V5.60.0,  stop                                                               07/10/22  19:46:41  PAGE 3   

  124   2          cheku_flag = 2;
  125   2        }
  126   1        if(cheku_flag == 2 && che_cut > 15400)
  127   1        {
  128   2          che_cut = 0;
  129   2          cheku_flag = 3;
  130   2        }
  131   1        if(cheku_flag == 2)   //开始入库
  132   1        {
  133   2          all_speed_L = 60;
  134   2          all_speed_R = 60;
  135   2          ki_l = 10;
  136   2          ki_r = 10;
  137   2        }
  138   1        if(cheku_flag == 3 && !open)
  139   1        {
  140   2          open = 1;
  141   2          sum_angle = 0;
  142   2        }
  143   1        if(cheku_flag == 3)
  144   1        {
  145   2          duty_ = right;
  146   2        }
  147   1        if(cheku_flag == 3 && abs(sum_angle) > 60)
  148   1        {
  149   2          open = 0;
  150   2          sum_angle = 0;
  151   2          cheku_flag = 4;
  152   2          che_cut = 0;
  153   2        }
  154   1      //  if(cheku_flag == 4)
  155   1      //  {
  156   1      //    duty_ = mid; 
  157   1      //    che_cut = che_cut + 1;
  158   1      //  }
  159   1      //  if(cheku_flag == 3 && che_cut > 50)
  160   1      //  if(cheku_flag == 4)
  161   1      //  {
  162   1      //    che_cut = 0;
  163   1      //    cheku_flag = 4;
  164   1      //  }
  165   1        if(cheku_flag == 4)
  166   1        {
  167   2          all_speed_L = 0;
  168   2          all_speed_R = 0;
  169   2          ki_l = 20;
  170   2          ki_r = 20;
  171   2        }
  172   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       945     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        12     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
C251 COMPILER V5.60.0,  stop                                                               07/10/22  19:46:41  PAGE 4   

  const size           =    ------     ------
  hconst size          =        36     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
